<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hydro Bot</title>
  <meta name="description" content="Hydro Bot ‚Äì Inova√ß√£o para combate e preven√ß√£o de inc√™ndios" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />
</head>
<body class="theme-dark">
  <div id="loader" aria-hidden="true">
    <div class="spinner" role="status" aria-label="Carregando"></div>
    <span class="sr-only" data-i18n="loading">Carregando‚Ä¶</span>
  </div>

  <header class="navbar">
    <a class="brand" href="index.html">
      <img src="images/logo.png" alt="Hydro Bot" class="brand-logo" />
      <span class="brand-name">Hydro Bot</span>
    </a>
    <button class="nav-toggle" aria-expanded="false" aria-controls="nav-links" aria-label="Abrir menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
    <nav id="nav-links" class="nav-links">
      <a href="index.html" class="active" data-i18n="home">Home</a>
      <a href="projeto.html" data-i18n="project">Projeto</a>
      <a href="casos.html" data-i18n="cases">Casos</a>
      <a href="#contato" data-i18n="contact">Contato</a>
      <a href="documentacao.html">Documenta√ß√£o</a>
    </nav>
    <div class="lang-switch">
      <button class="lang-btn" data-lang="pt"><img src="https://flagcdn.com/w20/br.png" alt="Portugu√™s"></button>
      <button class="lang-btn" data-lang="en"><img src="https://flagcdn.com/w20/us.png" alt="English"></button>
      <button class="lang-btn" data-lang="es"><img src="https://flagcdn.com/w20/es.png" alt="Espa√±ol"></button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="hero-bg"></div>
      <div class="hero-content container">
        <h1 class="reveal fade-up" data-i18n="heroTitle">
          Inova√ß√£o no combate e <span class="accent">preven√ß√£o de inc√™ndios</span>
        </h1>
        <p class="lead reveal fade-up delay-1" data-i18n="heroSubtitle">
          O Hydro Bot integra sensores, vis√£o computacional e resposta r√°pida para proteger pessoas e ambientes cr√≠ticos.
        </p>
        <div class="cta-row reveal fade-up delay-2">
          <a class="btn primary" href="projeto.html" data-i18n="seeProject">Ver Projeto</a>
          <a class="btn ghost" href="casos.html" data-i18n="seeCases">Casos de Inc√™ndio</a>
        </div>
        <div class="hero-media reveal fade-up delay-3 tilt">
          <br>
          <img src="images/equipe.jpg" alt="Equipe Hydro Bot" class="main-photo" />
        </div>
      </div>
    </section>

    <section id="sobre" class="section container">
      <div class="grid two">
        <div class="card glass reveal">
          <h2 data-i18n="why">Por que Hydro Bot?</h2>
          <p data-i18n="whyText">
            O nome Hydro Bot une dois conceitos: "Hydro", que remete √† √°gua usada no combate ao fogo, e "Bot", de rob√¥.
          </p>
        </div>
        <div class="card outline reveal delay-1">
          <h2 data-i18n="how">Como funciona</h2>
          <ul class="feature-list">
            <li data-i18n="howItem1">O Hydro Bot detecta fogo com sensores, navega sozinho por corredores, e usa um spray de √°gua do reservat√≥rio para apagar o inc√™ndio.</li>
            <li data-i18n="howItem2">O sistema pode ser controlado pelo Aplicativo ou pelo sistema pr√≥prio.</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="section container">
      <h2 class="section-title reveal" data-i18n="highlights">Destaques</h2>
      <div class="grid three">
        <div class="card reveal">
          <h3 data-i18n="highlight1">Resposta R√°pida</h3>
          <p data-i18n="highlight1Text">Minimizamos o tempo cr√≠tico entre detec√ß√£o e combate.</p>
        </div>
        <div class="card reveal delay-1">
          <h3 data-i18n="highlight2">Escal√°vel</h3>
          <p data-i18n="highlight2Text">Do laborat√≥rio √† ind√∫stria, adapt√°vel a diferentes cen√°rios.</p>
        </div>
        <div class="card reveal delay-2">
          <h3 data-i18n="highlight3">Monitoramento</h3>
          <p data-i18n="highlight3Text">Dados e imagens para an√°lise posterior e melhoria cont√≠nua.</p>
        </div>
      </div>
    </section>

    <section id="contato" class="section container">
      <h2 class="section-title reveal" data-i18n="contact">Contato</h2>
      <p class="reveal"><span data-i18n="contactText">Envie um e-mail para</span> <a href="https://mail.google.com/mail/u/0/?pli=1#inbox?compose=new">tccantiincendio@gmail.com</a></p>
    </section>
  </main>

  <button id="backToTop" class="back-to-top">‚Üë</button>
  <footer class="footer">
    <div class="container small">
      <p>¬© <span data-year></span> Hydro Bot. <span data-i18n="footer">Todos os direitos reservados.</span></p>
    </div>
  </footer>

  <!-- Bot√£o flutuante do chat -->
  <div id="chat-btn" class="chat-btn">üí¨</div>

  <!-- Caixa de perguntas -->
  <div id="chat-box" class="chat-box">
    <div class="chat-header">Envie sua pergunta - Digite seu nome antes da pergunta</div>
    <textarea id="chat-input" placeholder="Digite sua pergunta..."></textarea>
    <button id="send-question" class="btn primary">Enviar</button>
    <div id="chat-feedback" class="chat-feedback"></div>
  </div>

  <!-- Script limpo apenas com funcionalidades b√°sicas -->
  <script src="js/script.js"></script>

  <!-- Firebase v9 modular - √öNICA integra√ß√£o -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyArkviije5lk6GX_egMHwrUagb6pqIXflA",
      authDomain: "hydrobot-chat.firebaseapp.com",
      projectId: "hydrobot-chat",
      storageBucket: "hydrobot-chat.appspot.com",
      messagingSenderId: "218191640260",
      appId: "1:218191640260:web:4a846b46b4aa3a8926fb91"
    };

    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Elementos do chat
    const chatBtn = document.getElementById('chat-btn');
    const chatBox = document.getElementById('chat-box');
    const sendBtn = document.getElementById('send-question');
    const chatInput = document.getElementById('chat-input');
    const feedbackDiv = document.getElementById('chat-feedback');

    // Toggle do chat
    if (chatBtn && chatBox) {
      chatBtn.addEventListener('click', () => {
        chatBox.classList.toggle('active');
        if (chatBox.classList.contains('active')) {
          chatInput.focus();
        }
      });
    }

    // Fun√ß√£o para mostrar feedback
    function showFeedback(msg, type) {
      if (feedbackDiv) {
        feedbackDiv.textContent = msg;
        feedbackDiv.className = `chat-feedback ${type}`;
        feedbackDiv.style.display = 'block';
      }
    }

    // Fun√ß√£o para limpar feedback
    function clearFeedback() {
      if (feedbackDiv) {
        feedbackDiv.textContent = '';
        feedbackDiv.style.display = 'none';
      }
    }

    // Enviar pergunta - √öNICA fun√ß√£o de envio
    if (sendBtn && chatInput) {
      sendBtn.addEventListener('click', async () => {
        const question = chatInput.value.trim();
        
        if (question.length === 0) {
          showFeedback("Digite uma pergunta antes de enviar!", "error");
          return;
        }

        // Desabilita o bot√£o durante o envio
        sendBtn.disabled = true;
        sendBtn.textContent = "Enviando...";
        showFeedback("Enviando sua pergunta...", "info");

        try {
          // Salva no Firestore
          await addDoc(collection(db, 'perguntas'), {
            texto: question,
            data: new Date(),
            timestamp: Date.now()
          });

          showFeedback("Pergunta enviada com sucesso!", "success");
          chatInput.value = '';

          // Fecha o chat ap√≥s 2 segundos
          setTimeout(() => {
            chatBox.classList.remove('active');
            clearFeedback();
          }, 2000);

        } catch (error) {
          console.error("Erro ao salvar pergunta:", error);
          showFeedback("Erro ao enviar. Tente novamente.", "error");
        } finally {
          // Reabilita o bot√£o
          sendBtn.disabled = false;
          sendBtn.textContent = "Enviar";
        }
      });

      // Permite enviar com Enter
      chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendBtn.click();
        }
      });
    }

    // Log para debug
    console.log("Firebase inicializado com sucesso!");
  </script>
</body>
</html>