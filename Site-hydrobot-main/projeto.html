<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projeto Hydro Bot</title>
  <meta name="description" content="Detalhes do projeto Hydro Bot" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />
</head>
<body class="theme-dark">
  <header class="navbar" role="navigation" aria-label="Principal">
    <a class="brand" href="index.html">
      <img src="images/logo.png" alt="Hydro Bot" class="brand-logo" />
      <span class="brand-name">Hydro Bot</span>
    </a>
    <button class="nav-toggle" aria-expanded="false" aria-controls="nav-links" aria-label="Abrir menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
    <nav id="nav-links" class="nav-links">
      <a href="index.html" data-i18n="home">Home</a>
      <a href="projeto.html" class="active" data-i18n="project">Projeto</a>
      <a href="casos.html" data-i18n="cases">Casos</a>
    </nav>

    <div class="lang-switch">
      <button class="lang-btn" data-lang="pt" aria-label="Portugu√™s">
        <img src="https://flagcdn.com/w20/br.png" alt="Portugu√™s">
      </button>
      <button class="lang-btn" data-lang="en" aria-label="English">
        <img src="https://flagcdn.com/w20/us.png" alt="English">
      </button>
      <button class="lang-btn" data-lang="es" aria-label="Espa√±ol">
        <img src="https://flagcdn.com/w20/es.png" alt="Espa√±ol">
      </button>
    </div>
  </header>

  <main>
    <section class="section container">
      <h1 class="section-title reveal" data-i18n="project">Projeto Hydro Bot</h1>
      <div class="grid two">
        <div class="card reveal">
          <h2 data-i18n="architecture">Arquitetura</h2>
          <p data-i18n="architectureText">Integra√ß√£o de sensores, c√¢mera, m√≥dulo de decis√£o e atuadores para resposta autom√°tica.</p>
          <ul class="feature-list">
            <li data-i18n="sensor1">Sensor de fuma√ßa/temperatura</li>
            <li data-i18n="sensor2">Vis√£o computacional para detec√ß√£o de chamas</li>
            <li data-i18n="sensor3">Acionamento de bomba/aspers√£o</li>
          </ul>
        </div>
        <div class="card media reveal tilt">
          <img src="images/3d.png" alt="Prot√≥tipo Hydro Bot" class="project-photo"/>
        </div>
      </div>

      <h2 class="section-title reveal" data-i18n="projectPhotos">Fotos do projeto:</h2>
      <div class="grid two">
        <a class="gallery-item reveal" href="images/fotoa.jpg" data-lightbox="projeto" data-caption="Foto do projeto 1">
          <img src="images/foto1.jpg" alt="Foto do projeto 1" class="case-photo"/>
        </a>
        <a class="gallery-item reveal delay-1" href="images/cabou.jpg" data-lightbox="projeto" data-caption="Foto do projeto 2">
          <img src="images/cabou.jpg" alt="Foto do projeto 2" class="case-photo"/>
        </a>
        <br>
      </div>
      <div class="cta-row">
        <a class="btn primary" href="casos.html" data-i18n="seeFireCases">Ver sobre casos de inc√™ndios</a>
      </div>
    </section>
  </main>

  <button id="backToTop" class="back-to-top" aria-label="Voltar ao topo">‚Üë</button>

  <footer class="footer">
    <div class="container small">
      <p>¬© <span data-year></span> Hydro Bot. <span data-i18n="footer">Todos os direitos reservados.</span></p>
    </div>
  </footer>

  <!-- Bot√£o flutuante do chat -->
  <div id="chat-btn" class="chat-btn">üí¨</div>

  <!-- Caixa de perguntas -->
  <div id="chat-box" class="chat-box">
    <div class="chat-header">Envie sua pergunta</div>
    <textarea id="chat-input" placeholder="Digite sua pergunta..."></textarea>
    <button id="send-question" class="btn primary">Enviar</button>
    <div id="chat-feedback" class="chat-feedback"></div>
  </div>

  <!-- Script limpo apenas com funcionalidades b√°sicas -->
  <script src="js/script.js"></script>

  <!-- Firebase v9 modular - Sistema de Chat -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyArkviije5lk6GX_egMHwrUagb6pqIXflA",
      authDomain: "hydrobot-chat.firebaseapp.com",
      projectId: "hydrobot-chat",
      storageBucket: "hydrobot-chat.appspot.com",
      messagingSenderId: "218191640260",
      appId: "1:218191640260:web:4a846b46b4aa3a8926fb91"
    };

    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Elementos do chat
    const chatBtn = document.getElementById('chat-btn');
    const chatBox = document.getElementById('chat-box');
    const sendBtn = document.getElementById('send-question');
    const chatInput = document.getElementById('chat-input');
    const feedbackDiv = document.getElementById('chat-feedback');

    // Toggle do chat
    if (chatBtn && chatBox) {
      chatBtn.addEventListener('click', () => {
        chatBox.classList.toggle('active');
        if (chatBox.classList.contains('active')) {
          chatInput.focus();
        }
      });
    }

    // Fun√ß√£o para mostrar feedback
    function showFeedback(msg, type) {
      if (feedbackDiv) {
        feedbackDiv.textContent = msg;
        feedbackDiv.className = `chat-feedback ${type}`;
        feedbackDiv.style.display = 'block';
      }
    }

    // Fun√ß√£o para limpar feedback
    function clearFeedback() {
      if (feedbackDiv) {
        feedbackDiv.textContent = '';
        feedbackDiv.style.display = 'none';
      }
    }

    // Enviar pergunta
    if (sendBtn && chatInput) {
      sendBtn.addEventListener('click', async () => {
        const question = chatInput.value.trim();
        
        if (question.length === 0) {
          showFeedback("Digite uma pergunta antes de enviar!", "error");
          return;
        }

        sendBtn.disabled = true;
        sendBtn.textContent = "Enviando...";
        showFeedback("Enviando sua pergunta...", "info");

        try {
          await addDoc(collection(db, 'perguntas'), {
            texto: question,
            data: new Date(),
            pagina: 'projeto.html',
            timestamp: Date.now()
          });

          showFeedback("Pergunta enviada com sucesso!", "success");
          chatInput.value = '';

          setTimeout(() => {
            chatBox.classList.remove('active');
            clearFeedback();
          }, 2000);

        } catch (error) {
          console.error("Erro ao salvar pergunta:", error);
          showFeedback("Erro ao enviar. Tente novamente.", "error");
        } finally {
          sendBtn.disabled = false;
          sendBtn.textContent = "Enviar";
        }
      });

      // Permite enviar com Enter
      chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendBtn.click();
        }
      });
    }

    console.log("Firebase inicializado - P√°gina Projeto");
  </script>
</body>
</html>